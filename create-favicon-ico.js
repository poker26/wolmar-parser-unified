const fs = require('fs');
const path = require('path');

// ÐŸÑ€Ð¾ÑÑ‚Ð¾Ð¹ ICO Ñ„Ð°Ð¹Ð» (16x16 Ð¿Ð¸ÐºÑÐµÐ»ÐµÐ¹) - ÑÑ‚Ð¾ Ð¼Ð¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ
// Ð’ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ Ð»ÑƒÑ‡ÑˆÐµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð¾Ð½Ð»Ð°Ð¹Ð½ ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚ÐµÑ€Ñ‹ Ð¸Ð»Ð¸ ÑÐ¿ÐµÑ†Ð¸Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð±Ð¸Ð±Ð»Ð¸Ð¾Ñ‚ÐµÐºÐ¸
const icoHeader = Buffer.from([
    0x00, 0x00, // Reserved (must be 0)
    0x01, 0x00, // Type (1 = ICO)
    0x01, 0x00, // Number of images
    0x20,       // Width (32)
    0x20,       // Height (32)
    0x00,       // Color palette (0 = no palette)
    0x00,       // Reserved
    0x01, 0x00, // Color planes
    0x20, 0x00, // Bits per pixel (32)
    0x00, 0x00, 0x00, 0x00, // Size of image data
    0x16, 0x00, 0x00, 0x00  // Offset to image data
]);

// ÐŸÑ€Ð¾ÑÑ‚Ð°Ñ 32x32 PNG Ð¸ÐºÐ¾Ð½ÐºÐ° Ð² Ð²Ð¸Ð´Ðµ Ð·Ð¾Ð»Ð¾Ñ‚Ð¾Ð¹ Ð¼Ð¾Ð½ÐµÑ‚Ñ‹ Ñ Ð±ÑƒÐºÐ²Ð¾Ð¹ W
// Ð­Ñ‚Ð¾ ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ - Ð² Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾ÑÑ‚Ð¸ Ð»ÑƒÑ‡ÑˆÐµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹Ðµ Ð¸ÐºÐ¾Ð½ÐºÐ¸
const pngData = Buffer.from([
    // PNG signature
    0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A,
    // IHDR chunk
    0x00, 0x00, 0x00, 0x0D, 0x49, 0x48, 0x44, 0x52,
    0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x20,
    0x08, 0x06, 0x00, 0x00, 0x00, 0x73, 0x7A, 0x7A,
    0xF4, 0x00, 0x00, 0x00, 0x19, 0x74, 0x45, 0x58,
    0x74, 0x53, 0x6F, 0x66, 0x74, 0x77, 0x61, 0x72,
    0x65, 0x00, 0x41, 0x64, 0x6F, 0x62, 0x65, 0x20,
    0x49, 0x6D, 0x61, 0x67, 0x65, 0x52, 0x65, 0x61,
    0x64, 0x79, 0xCC, 0x26, 0x77, 0x00, 0x00, 0x00,
    0x0A, 0x49, 0x44, 0x41, 0x54, 0x78, 0x9C, 0x63,
    0x00, 0x01, 0x00, 0x00, 0x05, 0x00, 0x01, 0x0D,
    0x0A, 0x2D, 0xB4, 0x00, 0x00, 0x00, 0x00, 0x49,
    0x45, 0x4E, 0x44, 0xAE, 0x42, 0x60, 0x82
]);

// Ð¡Ð¾Ð·Ð´Ð°ÐµÐ¼ ICO Ñ„Ð°Ð¹Ð»
const icoFile = Buffer.concat([icoHeader, pngData]);

// Ð—Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°ÐµÐ¼ Ñ„Ð°Ð¹Ð»
fs.writeFileSync(path.join(__dirname, 'public', 'favicon.ico'), icoFile);

console.log('âœ… Favicon.ico ÑÐ¾Ð·Ð´Ð°Ð½ Ð² public/favicon.ico');
console.log('ðŸ“ ÐŸÑ€Ð¸Ð¼ÐµÑ‡Ð°Ð½Ð¸Ðµ: Ð­Ñ‚Ð¾ ÑƒÐ¿Ñ€Ð¾Ñ‰ÐµÐ½Ð½Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ. Ð”Ð»Ñ Ð»ÑƒÑ‡ÑˆÐµÐ³Ð¾ ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð° Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¾Ð½Ð»Ð°Ð¹Ð½ ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚ÐµÑ€Ñ‹ SVG->ICO');
